---
title: "GDOC Program Recidivism/Staffing Requirements"
subtitle: "August 2024"
geometry: "left=1.5cm,right=1.5cm,top=0cm,bottom=1cm"
---
\setlength{\headsep}{-0.25cm}
\pagenumbering{gobble}
\vspace{-2.6truecm}

This report includes the overall recidivism rates (2018-2019) for evidence-based programming provided in the Gotham Department of Corrections facilities for high-risk people. Staffing numbers describe how many full-time employees are needed over the course of a year to keep each program running. Each program facilitator completes extensive training and must complete eight hours of continuing education each year. 

\small

```{r table, echo=FALSE, message=FALSE, warning=FALSE}
library(charlatan)
library(lubridate)
library(tidyverse)
library(knitr)
library(ggrepel)

#data setup
source("data_setup.R")

#ANALYSIS TOGGLE
######################################
source("toggle.R")

source("toggle_allby.R")

#programs to remove per the CWC report
source("rm_pgms.R")

#deduplicate across all columns
source("dedup.R")

#clean program names
source("roster_clean.R")

##create dataset of numerators and denominators
#recidivism rates overall
source("rates.R")

#clean program names
source("staff_clean.R")

#create table dataset
source("tabledata.R")

source("finaltable_report.R")
reportit |> rename(Program           = "program_official",
                   `Recidivism Rate` = "recid_rate_all",
                   Staffing          = "num_staff") |> 
  kable()
```

\vspace{-0.5truecm}

```{r graphic, include=FALSE}
source2 <- function(file, start, end, ...) {
    file.lines <- scan(file, what=character(), skip=start-1, nlines=end-start+1, sep='\n')
    file.lines.collapsed <- paste(file.lines, collapse='\n')
    source(textConnection(file.lines.collapsed), ...)
}

#manage the data to produce recidivism rates
source("cwc_unw.R")

#manage the data to produce recidivism rates
#total clients served (all years, year1, year2)
source("cwc_w.R")

#build bar chart of recidivism rates across programs
source2("va_cs_webr.qmd",45,123)

#plot print
pdf(width=6.5,height=5,pointsize=15,file="rrfinal.pdf")
print(rrfinal)
dev.off()  

ggsave("rrfinal.png", width = 8, height = 6, units = "in")
```

\begin{figure}
\includegraphics{rrfinal.pdf}
\end{figure}

```{r inline, include=FALSE}
#calculate programs with lowest/highest recid. rates


```

\normalsize

\vspace{-1truecm}

## Findings
\vspace{-0.4cm}
Overall, the programs that resulted in the lowest recidivism rates are the Mental Health Step Down Program and the Sex Offender Treatment Program. The programs that have the highest recidivism rates are Anger Management and Steps Toward Awareness, Growth, and Emotional Strength Program. 

\vspace{-0.3cm}

## Methodology
\vspace{-0.4cm}
All participants have taken one of these programs right before release. The cohort analyzed were released from prison in 2018 and 2019. Overall recidivism rates are computed. 